# Requirements Document

## Introduction

Додаток Balance App показує лоадер, який не зникає, і дані не відображаються. Потрібно діагностувати та виправити проблему з завантаженням даних від API провайдерів (PrivatBank та Wise).

## Glossary

- **Balance App**: macOS додаток для відображення балансів з різних банківських API
- **API Service**: Сервіс для виконання HTTP запитів до PrivatBank та Wise API
- **Content ViewModel**: ViewModel, що керує станом завантаження та даними
- **Loader**: Індикатор прогресу, що показується під час завантаження даних
- **Keychain**: Системне сховище для безпечного зберігання токенів

## Requirements

### Requirement 1

**User Story:** Як користувач, я хочу бачити чіткі повідомлення про помилки, щоб розуміти, чому дані не завантажуються

#### Acceptance Criteria

1. WHEN запит до API провайдера не вдається, THE Balance App SHALL відобразити конкретне повідомлення про помилку з назвою провайдера
2. WHEN токен API відсутній або невалідний, THE Balance App SHALL показати повідомлення про необхідність налаштування токена
3. WHEN запит до API перевищує timeout, THE Balance App SHALL показати повідомлення про timeout з можливістю повторити запит
4. WHEN всі запити завершені (успішно або з помилкою), THE Balance App SHALL приховати індикатор завантаження

### Requirement 2

**User Story:** Як користувач, я хочу бачити детальні логи в консолі, щоб розуміти, що відбувається під час завантаження

#### Acceptance Criteria

1. WHEN додаток починає завантаження даних, THE Balance App SHALL записати в консоль початок завантаження з timestamp
2. WHEN запит до API виконується, THE Balance App SHALL логувати URL, метод та статус відповіді
3. WHEN виникає помилка, THE Balance App SHALL логувати повний текст помилки та stack trace
4. WHEN дані успішно отримані, THE Balance App SHALL логувати кількість отриманих записів

### Requirement 3

**User Story:** Як користувач, я хочу мати можливість тестувати підключення до API, щоб перевірити правильність налаштувань

#### Acceptance Criteria

1. WHEN користувач натискає кнопку "Тест підключення" в налаштуваннях, THE Balance App SHALL виконати тестовий запит до кожного увімкненого провайдера
2. WHEN тестовий запит успішний, THE Balance App SHALL показати зелене повідомлення "Підключення успішне"
3. WHEN тестовий запит не вдається, THE Balance App SHALL показати червоне повідомлення з деталями помилки
4. WHILE тестовий запит виконується, THE Balance App SHALL показувати індикатор завантаження біля кнопки тесту

### Requirement 4

**User Story:** Як користувач, я хочу бачити стан завантаження для кожного провайдера окремо, щоб розуміти, який саме сервіс не відповідає

#### Acceptance Criteria

1. WHEN завантаження даних починається, THE Balance App SHALL показувати індикатор завантаження для кожного увімкненого провайдера
2. WHEN дані від провайдера отримані, THE Balance App SHALL показати зелену галочку біля назви провайдера
3. WHEN запит до провайдера не вдається, THE Balance App SHALL показати червоний хрестик біля назви провайдера
4. WHEN всі провайдери завершили завантаження, THE Balance App SHALL приховати загальний індикатор завантаження
